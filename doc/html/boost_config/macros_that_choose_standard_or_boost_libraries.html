<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Macros that choose standard or Boost libraries</title>
<link rel="stylesheet" href="../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.Config">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.Config">
<link rel="prev" href="acknowledgements.html" title="Acknowledgements">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="acknowledgements.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_config.macros_that_choose_standard_or_boost_libraries"></a><a class="link" href="macros_that_choose_standard_or_boost_libraries.html" title="Macros that choose standard or Boost libraries">Macros
    that choose standard or Boost libraries</a>
</h2></div></div></div>
<p>
      A number of Boost libraries are also represented in the C++ standard with corresponding
      C++ standard libraries. While the Boost and corresponding C++ standard library
      do not necessarily have exactly the same functionality they are often close
      enough in their functionality so that either can be used for particular programming
      tasks.
    </p>
<p>
      A programmer may want to use the C++ standard version of such a library, if
      it has been made available by the compiler implementation, rather than the
      Boost version of the library, in order to remove a dependency in code on the
      Boost version of such a library.
    </p>
<p>
      Boost.config offers macros which allow the programmer to automatically include
      and use the appropriate version of the library, whether C++ standard or Boost.
    </p>
<p>
      These macros are not included automatically when &lt;boost/config.h&gt; is
      included as a header file. Instead the programmer includes the appropriate
      header file for a particular library from within the boost/config/cpp subdirectory,
      and then makes use of macros in that header file to automatically use either
      the C++ standard version of that library, if it is available for the particulat
      compiler implementation, or the Boost version of that library, if the C++ standard
      version is not available for the particular compiler implementation.
    </p>
<p>
      For a give library 'XXX' which exists as a Boost version and may exist as a
      C++ standard library version, the user will:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          #include &lt;boost/config/cpp/XXX.hpp&gt;
        </li>
<li class="listitem">
          Use BOOST_CPP_XXX_HDR in order to include the header file for that library,
          ie. #include BOOST_CPP_XXX_HDR
        </li>
<li class="listitem">
          Use the macro BOOST_CPP_XXX_NS as the namespace for that library when using
          the functionality of that library, ie. BOOST_CPP_XXX_NS::some_library_functionality
        </li>
<li class="listitem">
          If necessary use the macro BOOST_CPP_HAS_XXX to determine whether the C++
          standard version of the library is available or not. If BOOST_CPP_HAS_XXX
          is 1 the C++ standard version of the library is available for use and if
          BOOST_CPP_HAS_XXX is 0 only the Boost version of the library is available
          for use, ie. #if BOOST_CPP_HAS_XXX for code that depends only on the C++
          standard version of the library or #if !BOOST_CPP_HAS_XXX for code that
          depends only on the Boost version of the library
        </li>
</ul></div>
<p>
      The following table lists the libraries and the appropriate information for
      each one:
    </p>
<div class="table">
<a name="boost_config.macros_that_choose_standard_or_boost_libraries.t0"></a><p class="title"><b>Table&#160;1.1.&#160;Libraries</b></p>
<div class="table-contents"><table class="table" summary="Libraries">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
              <p>
                Library
              </p>
            </th>
<th>
              <p>
                Header file
              </p>
            </th>
<th>
              <p>
                Include macro
              </p>
            </th>
<th>
              <p>
                Namespace macro
              </p>
            </th>
<th>
              <p>
                Check C++ standard version macro
              </p>
            </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                array
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/array.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_ARRAY_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_ARRAY_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_ARRAY
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                atomic
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/atomic.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_ATOMIC_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_ATOMIC_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_ATOMIC
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                bind
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/bind.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_BIND_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_BIND_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_BIND
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                chrono
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/chrono.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_CHRONO_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_CHRONO_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_CHRONO
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                function
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/function.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_FUNCTION_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_FUNCTION_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_FUNCTION
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                hash
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/hash.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HASH_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HASH_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_HASH
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                mem_fn
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/mem_fn.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_MEM_FN_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_MEM_FN_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_MEM_FN
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                random
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/random.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_RANDOM_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_RANDOM_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_RANDOM
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                ratio
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/ratio.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_RATIO_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_RATIO_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_RATIO
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                ref
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/ref.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_REF_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_REF_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_REF
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                regex
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/regex.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_REGEX_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_REGEX_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_REGEX
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                shared_ptr
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/shared_ptr.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_SHARED_PTR_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_SHARED_PTR_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_SHARED_PTR
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                thread
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/thread.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_THREAD_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_THREAD_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_THREAD
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                tuple
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/tuple.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TUPLE_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TUPLE_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_TUPLE
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                type_index
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/type_index.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TYPE_INDEX_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TYPE_INDEX_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_TYPE_INDEX
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                type_traits
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/type_traits.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TYPE_TRAITS_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_TYPE_TRAITS_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_TYPE_TRAITS
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                unordered_map
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/unordered_map.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MAP_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MAP_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_UNORDERED_MAP
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                unordered_multimap
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/unordered_multimap.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MULTIMAP_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MULTIMAP_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_UNORDERED_MULTIMAP
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                unordered_multiset
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/unordered_multiset.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MULTISET_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_MULTISET_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_UNORDERED_MULTISET
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                unordered_set
              </p>
            </td>
<td>
              <p>
                &lt;boost/config/cpp/unordered_set.hpp&gt;
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_SET_HDR
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_UNORDERED_SET_NS
              </p>
            </td>
<td>
              <p>
                BOOST_CPP_HAS_UNORDERED_SET
              </p>
            </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><h4>
<a name="boost_config.macros_that_choose_standard_or_boost_libraries.h0"></a>
      <span class="phrase"><a name="boost_config.macros_that_choose_standard_or_boost_libraries.using_the_macros_"></a></span><a class="link" href="macros_that_choose_standard_or_boost_libraries.html#boost_config.macros_that_choose_standard_or_boost_libraries.using_the_macros_">Using
      the macros </a>
    </h4>
<p>
      The general form of using these macros in a translation unit will now be given,
      choosing the regex library as an example.
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">cpp</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">BOOST_CPP_REGEX_HDR</span>

<span class="keyword">void</span> <span class="identifier">SomeFunction</span><span class="special">()</span>
  <span class="special">{</span>
  <span class="identifier">BOOST_CPP_REGEX_NS</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">re</span><span class="special">(</span><span class="string">"A regular expression etc."</span><span class="special">);</span>
  <span class="keyword">bool</span> <span class="identifier">result</span><span class="special">(</span><span class="identifier">BOOST_CPP_REGEX_NS</span><span class="special">::</span><span class="identifier">regex_match</span><span class="special">(</span><span class="string">"Some string..."</span><span class="special">,</span><span class="identifier">re</span><span class="special">));</span>
  <span class="comment">// etc.</span>
  <span class="special">}</span>
</pre>
<p>
      In the example the code will work whether we are using the C++ standard regex
      library or the Boost regex library.
    </p>
<h4>
<a name="boost_config.macros_that_choose_standard_or_boost_libraries.h1"></a>
      <span class="phrase"><a name="boost_config.macros_that_choose_standard_or_boost_libraries.using_the_boost_cpp_has_____macro_"></a></span><a class="link" href="macros_that_choose_standard_or_boost_libraries.html#boost_config.macros_that_choose_standard_or_boost_libraries.using_the_boost_cpp_has_____macro_">Using
      the BOOST_CPP_HAS_... macro </a>
    </h4>
<p>
      The BOOST_CPP_HAS_ macro for any given library is a more understandable form
      of macro than Boost.config already has for determining whether the compiler
      supports certain C++ libraries. Most of these macros are taken from whether
      or not a given BOOST_NO_CXX11_HDR_ is defined. You can use a BOOST_CPP_HAS_
      macro to discover whether a Boost library is also supported by an equivalent
      C++ standard library. You may decide you need the C++ standard version of a
      particular library, rather than the Boost version, or else you do not want
      your code to compile. As an example let's say that you want to create a compile
      error if the compiler does not support the C++ standard library type_traits
      library, even though the Boost type_traits library could also normally be used.
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">cpp</span><span class="special">/</span><span class="identifier">type_traits</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#if</span> <span class="special">!</span><span class="identifier">BOOST_CPP_HAS_TYPE_TRAITS</span>
<span class="preprocessor">#error</span> <span class="identifier">C</span><span class="special">++</span> <span class="identifier">standard</span> <span class="identifier">type_traits</span> <span class="identifier">library</span> <span class="identifier">needed</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="identifier">present</span><span class="special">.</span>
<span class="preprocessor">#endif</span>

<span class="comment">// Further code</span>
</pre>
<p>
      Another use for the BOOST_CPP_HAS_ macro is to include particular header files
      rather than a main header file, for some given library functionality. This
      is more prevalent with Boost than with the C++ standard library, the latter
      almost always having a single header file which includes library functionality
      for all parts of a library.
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">cpp</span><span class="special">/</span><span class="identifier">type_traits</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#if</span> <span class="identifier">BOOST_CPP_HAS_TYPE_TRAITS</span>
<span class="preprocessor">#include</span> <span class="identifier">BOOST_CPP_TYPE_TRAITS_HDR</span>
<span class="preprocessor">#else</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">type_traits</span><span class="special">/</span><span class="identifier">add_const</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#endif</span>

<span class="comment">// Further code using BOOST_CPP_TYPE_TRAITS_NS::add_const</span>
</pre>
<p>
      You can also use the BOOST_CPP_HAS_ macro to provide specific functionality
      depending on whether or not a particular library is using the C++ standard
      or Boost version. Of course you hope to minimize these situations but occasionally
      they happen:
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">cpp</span><span class="special">/</span><span class="identifier">thread</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">BOOST_CPP_THREAD_HDR</span>

<span class="comment">// Code...</span>

<span class="preprocessor">#if</span> <span class="identifier">BOOST_CPP_HAS_THREAD</span>

<span class="comment">// Functionality available if the C++ standard version of the thread library is being used</span>

<span class="preprocessor">#else</span>

<span class="comment">// Functionality available if the Boost version of the thread library is being used</span>

<span class="preprocessor">#endif</span>
</pre>
<h4>
<a name="boost_config.macros_that_choose_standard_or_boost_libraries.h2"></a>
      <span class="phrase"><a name="boost_config.macros_that_choose_standard_or_boost_libraries.library_header_file_dependency_"></a></span><a class="link" href="macros_that_choose_standard_or_boost_libraries.html#boost_config.macros_that_choose_standard_or_boost_libraries.library_header_file_dependency_">Library
      header file dependency </a>
    </h4>
<p>
      When the programmer includes the appropriate header file for a particular library
      from within the boost/config/cpp subdirectory there is no dependency being
      established on the library itself. Any one of the library header files merely
      defines macros which the programmer may choose to use or not.
    </p>
<p>
      It is only when using a particular include macro, along with a particular namespace
      macro, from any given library that a dependency is established.
    </p>
<p>
      Because of this it has been made possible to include all library headers with
      a single include:
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">cpp</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>
</pre>
<p>
      This includes macros for each library, starting with BOOST_CPP_, but as long
      as the prefix BOOST_CPP_ does not conflict with macros from any other software
      library in the translation unit there should be no problems.
    </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2001-2007 Beman Dawes, Vesa Karvonen, John
      Maddock<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="acknowledgements.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a>
</div>
</body>
</html>
